<!DOCTYPE HTML><html lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)"><title>Configure OpenCV for Xcode | Unbinilium&#39;s üìù</title><link rel="preload" href="/css/style.css" as="style"><link rel="preload" href="/js/mathjax-loader.js" as="script"><link rel="preload" href="/js/mermaid-loader.js" as="script"><meta name="author" content="Unbinilium"><meta name="description" content="Unbinilium&#39;s draft papers, also the personal weblog"><meta property="og:title" content="Configure OpenCV for Xcode"><meta property="og:site_name" content="Unbinilium&#39;s üìù"><link rel="stylesheet" href="/css/style.css"><script src="/js/mathjax-loader.js" defer></script><script src="/js/mermaid-loader.js" defer></script><link rel="shortcut icon" href="/css/images/favicon.png"><meta name="generator" content="Hexo 5.4.0"></head><body><header id="header" class="inner"><div class="alignleft"><h1 translate="no"><a href="/">Unbinilium&#39;s üìù</a></h1><h2><a href="/">My draft papers, also the personal weblog</a></h2></div><nav id="main-nav" class="alignright"><ul></ul><div class="clearfix"></div></nav><div class="clearfix"></div></header><div id="content" class="inner"><div id="main-col" class="alignleft"><div id="wrapper"><article id="post-configure-opencv-for-xcode" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><div class="post-content"><header><time class="dt-published" datetime="2020-10-13T00:00:00.000Z"><a href="">2020-10-13</a></time><h1 class="p-name title" itemprop="headline name">Configure OpenCV for Xcode</h1></header><div class="e-content entry" itemprop="articleBody"><p>Xcode is a complete developer toolset for creating apps for Mac, iPhone, iPad, Apple Watch, and Apple TV. Xcode brings user interface design, coding, testing, debugging, and submitting to the App Store all into a unified workflow.</p><p>Here‚Äôs a tutorial to setting up OpenCV and C++ environment for Xcode on macOS.</p><span id="more"></span><h2 id="Pre-Requirements">Pre Requirements</h2><ul><li>Install Homebrew</li></ul><p>Aptly titled <em>‚ÄúThe missing package manager for macOS‚Äù</em> is enough said. Homebrew is the macOS equivalent of the Ubuntu/Debian-based <code>apt-get</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby -e $(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span><br></pre></td></tr></table></figure><ul><li>Install OpenCV</li></ul><p>Simply we use <em>brew</em> to install the latest pre-compiled <em>OpenCV</em> to our computer:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install opencv</span><br></pre></td></tr></table></figure><ul><li>Install pkg-config</li></ul><p>The pkg-config is a helper tool used when compiling applications and libraries. It helps you insert the correct compiler options on the command line rather than hard-coding values. This will be helpful for finding the correct linker flags for OpenCV. This will be more clear in the subsequent steps.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install pkg-config</span><br></pre></td></tr></table></figure><ul><li>View OpenCV linker flags</li></ul><p>To view the linker flags for OpenCV, we should find <code>.pc</code> file first. It‚Äôs common to see this file in:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/Cellar/opencv/&lt;version_number&gt;/lib/pkgconfig/opencv.pc</span><br></pre></td></tr></table></figure><p>Then view the linker flags by specifing the location of opencv.pc file:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg-config --cflags --libs &lt;path/to/opencv.pc&gt;</span><br></pre></td></tr></table></figure><h2 id="Commandline">Commandline</h2><p>Running code in the terminal, the code should be compiled first:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ $(pkg-config --cflags --libs &lt;path/to/opencv.pc&gt;) -std=c++17  main.cpp -o main.o</span><br></pre></td></tr></table></figure><p>Then run the binary:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x main.o</span><br><span class="line">./main.o</span><br></pre></td></tr></table></figure><h2 id="Xcode-developing">Xcode developing</h2><h3 id="Configure-enviroment">Configure enviroment</h3><ul><li><p>Create project</p><p>Before following the below steps to run OpenCV C++ code in Xcode, a C++ project in Xcode should be created first.</p><ol><li>Click on <code>File &gt; New &gt; Project</code></li><li>Under Choose a template for new project click on <strong>macOS</strong></li><li>Under Application click on <strong>Command Line Tool</strong></li><li>Get the above screen. Fill in the details and set the Language to <strong>C++</strong>.</li></ol></li><li><p>Set Header Search Paths</p><ol><li>To set Header Search Path in Xcode, first click on the Xcode project, then go to <strong>Build Settings</strong> and then search for <strong>Header Search Paths</strong>.</li><li>Set the Header Search Path to the path of OpenCV include folder:</li></ol></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/Cellar/opencv/&lt;version_number&gt;/include/opencv4/opencv2</span><br><span class="line">/usr/local/Cellar/opencv/&lt;version_number&gt;/include/opencv4</span><br><span class="line">/usr/local/Cellar/opencv/&lt;version_number&gt;/include</span><br></pre></td></tr></table></figure><ul><li><p>Set Library Search Paths</p><ol><li>In this case, follow steps similar to <em>Set Header Search Paths</em> above but search for <strong>Library Search Paths</strong> in the search bar.</li><li>Set the Library Search Path to the path of OpenCV library folder.</li></ol></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/Cellar/opencv/&lt;version_number&gt;/lib</span><br></pre></td></tr></table></figure><ul><li><p>Set Other Linker Flags</p><ol><li>Search for <strong>Other Linker Flags</strong> in the search bar.</li><li>Set the other linker flags with all the flag values obtained after running <code>pkg-config</code> command above.</li></ol></li></ul><h3 id="Apply-permitions">Apply permitions</h3><ul><li><p>To allow camera access, first click on the Xcode project, then go to <strong>TARGETS &gt; Signing &amp; Capabilities</strong> and check <strong>Disable Library Validation</strong>, <strong>Debugging Tool</strong>, <strong>Audio Input</strong> and <strong>Camera</strong>.</p></li><li><p>Create <code>Info.plist</code>, add access requirement details:</p></li></ul><figure class="highlight plist"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Key: Privacy - Camera Usage Description</span><br><span class="line">Value: $(PRODUCT_NAME) camera use</span><br></pre></td></tr></table></figure><p>Then go to <strong>TARGETS &gt; Build Phases &gt; Copy Files</strong>, select <em>Destnation</em> to <strong>Products Directory</strong>, leave <em>Subpath</em> blank and click <code>+</code> to select file <code>Info.plist</code>.</p></div><footer><div class="tags" translate="no"><a href="../../../../tags/OpenCV/">OpenCV</a>, <a href="../../../../tags/IDE/">IDE</a>, <a href="../../../../tags/macOS/">macOS</a></div><div class="clearfix"></div></footer></div></article></div></div><aside id="sidebar" class="alignright"><div class="widget tag"><h3 class="title">Tags</h3><ul class="entry" translate="no"><li><a href="../../../../tags/About/">About</a> <small>1</small></li><li><a href="../../../../tags/C/">C++</a> <small>1</small></li><li><a href="../../../../tags/IDE/">IDE</a> <small>2</small></li><li><a href="../../../../tags/Linux/">Linux</a> <small>1</small></li><li><a href="../../../../tags/Machine-Learning/">Machine Learning</a> <small>1</small></li><li><a href="../../../../tags/OpenCV/">OpenCV</a> <small>4</small></li><li><a href="../../../../tags/Parallel-Programming/">Parallel Programming</a> <small>1</small></li><li><a href="../../../../tags/Windows/">Windows</a> <small>1</small></li><li><a href="../../../../tags/macOS/">macOS</a> <small>1</small></li></ul></div></aside><div class="clearfix"></div></div><footer id="footer" class="inner" translate="no"><div class="alignleft">&copy; 2021 Unbinilium</div><div class="clearfix"></div><script src="/js/sidebar-wrapper.js" async></script><script src="/js/code-notranslate.js" async></script></footer></body></html>